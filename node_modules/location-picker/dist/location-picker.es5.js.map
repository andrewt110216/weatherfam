{"version":3,"file":"location-picker.es5.js","sources":["../node_modules/style-inject/dist/style-inject.es.js","../src/location-picker.ts"],"sourcesContent":["function styleInject(css, ref) {\n  if ( ref === void 0 ) ref = {};\n  var insertAt = ref.insertAt;\n\n  if (!css || typeof document === 'undefined') { return; }\n\n  var head = document.head || document.getElementsByTagName('head')[0];\n  var style = document.createElement('style');\n  style.type = 'text/css';\n\n  if (insertAt === 'top') {\n    if (head.firstChild) {\n      head.insertBefore(style, head.firstChild);\n    } else {\n      head.appendChild(style);\n    }\n  } else {\n    head.appendChild(style);\n  }\n\n  if (style.styleSheet) {\n    style.styleSheet.cssText = css;\n  } else {\n    style.appendChild(document.createTextNode(css));\n  }\n}\n\nexport default styleInject;\n","import MapOptions = google.maps.MapOptions\nimport Map = google.maps.Map\n\nimport './location-picker.css'\nimport LatLng = google.maps.LatLng\n\nexport default class LocationPicker {\n  element: HTMLElement | null\n  map: Map\n\n  constructor(\n    element: string | HTMLElement,\n    options: LocationPickerOptions = {},\n    mapOptions: MapOptions = {}\n  ) {\n    let pO: LocationPickerOptions = {\n      setCurrentPosition: true\n    }\n\n    Object.assign(pO, options)\n\n    let mO: MapOptions = {\n      center: new google.maps.LatLng(pO.lat ? pO.lat : 34.4346, pO.lng ? pO.lng : 35.8362),\n      zoom: 15\n    }\n\n    Object.assign(mO, mapOptions)\n\n    // Allow both, a string with the element's id or a direct reference to the element\n    if (element instanceof HTMLElement) {\n      this.element = element\n    } else {\n      this.element = document.getElementById(element)\n    }\n\n    this.map = new google.maps.Map(this.element, mO)\n\n    // Append CSS centered marker element\n    let node = document.createElement('div')\n    node.classList.add('centerMarker')\n\n    if (this.element) {\n      this.element.classList.add('location-picker')\n      this.element.children[0].appendChild(node)\n    }\n\n    // Set center to current position if attribute `setCurrentPosition` is true and no initial position is set\n    if (pO.setCurrentPosition && !pO.lat && !pO.lng) {\n      this.setCurrentPosition()\n    }\n  }\n\n  getMarkerPosition() {\n    const latLng = this.map.getCenter()\n    return { lat: latLng.lat(), lng: latLng.lng() }\n  }\n\n  setLocation(lat: number, lng: number) {\n    this.map.setCenter(new google.maps.LatLng(lat, lng))\n  }\n\n  setCurrentPosition() {\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(\n        position => {\n          let pos = {\n            lat: position.coords.latitude,\n            lng: position.coords.longitude\n          }\n          this.map.setCenter(pos)\n        },\n        () => {\n          console.log('Could not determine your location...')\n        }\n      )\n    } else {\n      console.log('Your browser does not support Geolocation.')\n    }\n  }\n}\n\nexport interface LocationPickerOptions {\n  setCurrentPosition?: boolean\n  lat?: number\n  lng?: number\n}\n"],"names":[],"mappings":"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"}